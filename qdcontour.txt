// ======================================================================
/*!
 * \file
 * \brief Documentation for qdcontour
 */
// ======================================================================
/*!

\mainpage qdcontour - A querydata contouring application

<ol>
<li>\ref intro_section</li>
<li>\ref cmdline_section</li>
<li>\ref cmd_section</li>
<ol>
  <li>\ref variables_section</li>
  <li>\ref flowcontrol_section</li>
  <li>\ref comment_section</li>
</ol>
<li>\ref renderingshapefiles_section</li>
<ol>
  <li>\ref projection_section</li>
  <li>\ref shape_section</li>
  <li>\ref format_section</li>
  <li>\ref savingshape_section</li>
</ol>
<li>\ref renderingcontours_section</li>
<ol>
  <li>\ref querydata_section</li>
  <li>\ref filename_section</li>
  <li>\ref contour_section</li>
  <li>\ref arrow_section</li>
  <li>\ref label_section</li>
  <li>\ref rendercontour_section</li>
  <li>\ref interpolation_section</li>
  <li>\ref filtering_section</li>
  <li>\ref smoothing_section</li>
  <li>\ref timestamp_section</li>
</ol>
<li>\ref appendix_section</li>
<ol>
  <li>\ref color_section</li>
  <li>\ref blending_section</li>
  <li>\ref shapesample_section</li>
  <li>\ref sample_section</li>
  <li>\ref deprecated_section</li>
</ol>
/ol>

\section intro_section Introduction
The qdcontour program takes as input a control file, and depending
on the contents of the control file renders either contour images
from querydata, or maps from shapefiles.

\section cmdline_section Command line options

The program is used as follows:
\code
qdcontour [-v] [-f] [controlfile]
\endcode

The options are
<dl>
<dt>-v</dt>
<dd>Verbose output. For example output files are printed.</dd>
<dt>-f</dt>
<dd>Force output. Normally qdcontour may decide not to draw
    some contour image since an image by that name already
    exists. This greatly speeds up contouring by omitting
    unnecessary redrawing. However, occasionally one
    changes the control file somehow, and a redraw must be
    done by using the -f option.
</dd>
</dl>


\section cmd_section Control file syntax

\subsection comment_section Comments

Normal comments of the following form are supported.
\code
# comment
// comment
command # comment
command // comment
\endcode


\subsection variables_section Variables

The control file parser does not at the moment provide support
for user defined variables. However, this may change in the
future.

\subsection flowcontrol_section Flow control

The control file parser provides for very little flow control,
in particular there are no loop structures.

\htmlonly
<dl>
<dt>include [filename]</dt>
<dd>
The include command works via the NFmiPreProcessor class in
the newbase library.
</dd>
</dl>
\endhtmlonly

It would be possible to implement various extra conditional
directives in the \#if - \#else - \#endif style. For example,
one could automatically enable seasonal contouring colors
this way.

\section renderingshapefiles_section Rendering shapefiles

A complete sample control file can be found in the
appendix at \ref shapesample_section.

\subsection projection_section Specifying the projection

Before an image containing possibly multiple individual
shapefiles can be rendered, one must specify the
projection and the bounding box of the area to be rendered.
There are multiple ways to do this, each one automatically
calculating the missing information.

At the moment qdcontour supports only one projection,
the stereographic one. It is specified using the command
\code
stereographic [centrallongitude] [centrallatitude] [truelatitude]
\endcode
where <em>centrallongitude</em> is usually 25 when rendering Finland,
20 for Skandinavia and 10 for Europe. <em>centrallatitude</em>
is almost always 90 to indicate the polar stereographic projection.
The true latitude is often chosen to be 60, so that the distortion
would be minimal at the latitudes of Finland.

Once the projection has been specified, one must specify the
geographic bounding box as well as the image size. Below
we go through various ways of doing this.

\code
bottomleft [longitude] [latitude]
topright [longitude] [latitude]
size [width] [height]
\endcode
In above we specify the bounding box of the geographic area
by giving the corner coordinates in geographic units (degrees).
Then we fix the size of the produced image in both X and Y
directions. In effect this means we can force a geographic
area to be rendered at some fixed size, which may distort
the map.

A better alternative is
\code
bottomleft [longitude] [latitude]
topright [longitude] [latitude]
width [width]
\endcode
or
\code
bottomleft [longitude] [latitude]
topright [longitude] [latitude]
height [height]
\endcode
In these cases the missing image dimension is calculated
automatically so that the map will not be distorted.

Often however specifying the corner points is very
inconvenient, one may have to perform several trials
before finding a reasonable area. Overall the best
strategy may be to use
\code
center [longitude] [latitude]
scale [scale]
size [width] [height]
\endcode
In this case one specifies the location to be placed
at the center of the map, the desired size of the image
and then adjusts the scale so that the desired area
is completely covered.

The scale can be approximately interpreted to mean
how many kilometers one pixel is, but only roughly.

\subsection shape_section Drawing a single shapefile

There are two ways to render a shape file, either by filling
or stroking polyline or polygon data, or by placing markers
at point data.

Polyline or polygon data rendering is controlled using the
command
\code
shape [shapefilename] [fillcolor] [strokecolor]
\endcode
where <em>shapefilename</em> is the name of the shape, without
any suffix such as .shp or .dbf. If the filename cannot
be found directly, the environmental <em>imagine::shapes_path</em>
is used to locate the file.

The fillcolor and strokecolor can be in the form given
in \ref color_section. Often one of the colors is specified
to be <em>none</em>, indicating that either filling or
stroking is not to be done.

Point data rendering is controlled using the command
\code
shape [shapefilename] mark [markerfilename] [blendingrule] [blendfactor]
\endcode
where <em>markefilename</em> is the image to be used as a marker.
The blending rules are explained in section \ref blending_section,
the <em>blendfactor</em> can be used as an extra alpha factor
in the range 0-1, but often one uses the value 1 to indicate no extra
blending is to be done.

\subsection format_section Specifying the graphics format

Before actually rending the final image, once should
choose the desired graphics format and adjust the
parameters related to the format as desired.

The available commands are

\htmlonly
<dl>
<dt>format [format]</dt>
<dd>where [format] may be one of png, jpg or gif. The default
    format is png.
</dd>
<dt>savealpha [0/1]</dt>
<dd>is used to choose whether the alpha channel of the rendered
    image should be saved or ignored. Typically on ignores
    the alpha channel, unless the image intentionally contains
    transparent areas. The default is to save alpha channel.
</dd>
<dt>wantpalette [0/1]</dt>
<dd>This option is relevant only to the png format, which is
    the only one that allows both palette and truecolor storage.
    The flag indicates whether qdcontour should <em>try</em>
    to store the image in palette mode, if it can. For png
    this means there can be atmost 256 different colors,
    including differences in alpha.
</dd>
<dt>forcepalette [0/1]</dt>
<dd>The intent is to enable forcing a palette save for png
    format. However, this has <b>not</b> been implemented yet.
</dd>
<dt>jpegquality [0-100]</dt>
<dd>This allows one to control the quality of the compressed
    jpeg image. The higher the number, the better the quality,
    but also the larger the image file will be. The default
    value is -1, which implies the default chosen by
    libjpeg is used.
</dd>
<dt>pngquality [1-9]</dt>
<dd>This allows one to control the compression level of
    the png format. The default value is -1, which implies
    the default chosen by libpng is used.
</dd>
<dt>alphalimit [-1-127]</dt>
<dd>Alphalimit enables one to enforce binary transparency,
    that is, alpha is either on or off. The actual values
    depend on the chosen image format. The value -1 implies
    binary transparency is not enforced. This value is
    most relevant for the gif format, which does not
    support full transparency.
</dd>
</dl>
\endhtmlonly
Perhaps the set of most typical image format related commands is
\code
format png
savealpha 0
wantpalette 1
\endcode

\subsection savingshape_section Saving the result

Once the projection and the shapefile rendering directives
have been given, the actual output can be generated
using the command
\code
erase [color]
draw shapes [filename]
clear corners
clear sizes
clear shapes
\endcode
which causes all the shapefiles specified earlier to be
drawn in the given filename. The suffix of the filename
is chosen automatically according to the active graphics
format.

The <em>erase</em> command essentially defines the background
color for the image. The default is to use transparent color,
which most likely is not suitable for most maps.

The final three clearing commands do not have to be given,
but act as safety in case somebody intends to draw more
shapes in the same control file.

\section renderingcontours_section Rendering contours

\subsection querydata_section Querydata control

One may specify the querydata files to be used with the command
\code
querydata [filename1,filename2,...,filenameN]
\endcode
If the filenames are not absolute, and cannot be found
at the given places, the fmi.conf setting qdcontour::querydata_path
is used for searching for the file. As a special case, if the given
name is a directory, the newest querydata in that directory is used.
The time range one is able to contour is determined by the
common time span of the given queryfiles.

Whenever a parameter is specified to be contoured, the order
of the queryfiles is the order in which the parameter is searched.

Since one is only able to use one level when contouring,
one may choose it using the following command.
\code
querydatalevel [level]
\endcode
The default level is 1.

\subsection filename_section Controlling generated image filenames

As qdcontour goes through the available times in the specified
querydata, it will attempt to determine an unique filename
for each image. By default each filename is of the form
\code
[prefix][timestamp][origintimestamp][suffix].[format]
\endcode
The <em>format</em> is uniquely determined by using the
command
\code
format [format]
\endcode
where format is one of png, jpeg or gif.

The prefix and suffix are by default null strings, but can
be modified with the commands
\code
prefix [prefix]
suffix [suffix]
\endcode
The <em>origintimestamp</em> is the time stamp string generated
from the origin time of the query data, and is intended for
distinguishing between various forecast times. Whether or not
the string is used can be modified with the command
\code
timestamp [0/1]
\endcode
Finally, the files must be stored in some directory, which
is controlled with
\code
savepath [path]
\endcode
The default value for <em>path</em> is ".", the current directory.

For example, when contouring T2m forecasts one might use
\code
prefix ENN_
suffix _T2M
timestamp 1
savepath /foo/bar
\endcode

\subsection contour_section Controlling the contours

One is able to contour several parameters simultaneously.
The specifications for each individual parameter are started
by the command
\code
param [parametername]
\endcode
To draw contour lines on the parameter one can then repeatedly
use
\code
strokerule [blendrule]
contourline [value] [color]
\endcode
or define multiple lines simultaneously with
\code
contourlines [startvalue] [endvalue] [step] [startcolor] [endcolor]
\endcode
The colour for each individual line is interpolated linearly
between <em>startcolor</em> and <em>endcolor</em> in the HSV color
space, which is more likely suitable in this case than direct RGB
interpolation.

One should remember, that the latest defined <em>strokerule</em>
is the one to be used for each <em>contourline</em>.

Alternatively, one may specify some values intervals to be filled
with the desired colors by repeatedly applying the command
\code
fillrule [blendrule]
contourfill [startvalue] [endvalue] [color]
\endcode
As special cases, if <em>startvalue</em> is "-", it is interpreted
to mean minus infinity. Similarly <em>endvalue</em> would be interpreted
to be plus infinity. However, since the case
\code
contourfill - - [color]
\endcode
makes rarely sense, we define it instead to mean colouring all
missing values in the data. This is especially useful for data
which has limited range, such as radar data.

Also, one may define multiple fills simultaneously with
\code
contourfills [startvalue] [endvalue] [step] [startcolor] [endcolor]
\endcode
which works similarly to the <em>contourlines</em> command documented
earlier.

As with the case of <em>strokerule</em>, the latest defined
<em>blendrule</em> is the one to be used for each <em>contourfill</em>
command.

Finally, one may use an image pattern instead of a fixed color.
This is accomplished using the command
\code
contourpattern [startvalue] [endvalue] [patternfile] [blendrule] [blendfactor]
\endcode
where <em>patternfile</em> is the path to the image file containing the
pattern to be used when filling. The filling is performed using
<em>blendrule</em> with the extra <em>blendfactor</em> alpha factor.

There is no similar <em>patternfills</em> equivalent as before, as
interpolation between the start and end patterns would rarely make
sense.

\subsection arrow_section Drawing arrows from querydata

One may choose which parameters will be used as a direction - speed
pair when rendering arrows using the commands
\code
directionparam [parametername]
speedparam [parametername]
\endcode
The default values are <em>WindDirection</em> and <em>WindSpeedMS</em>
respectively.

The arrow to be drawn at each location is defined with the commands
\code
arrowpath [filename]
arrowpath meteorological
\endcode
where <em>filename</em> contains an SVG-style (limited) path definition,
which will be rotated according to the direction parameter. Specifying
<em>meteorological</em> arrow will let qdcontour automatically calculate
the suitable meteorological arrow. The arrow does not at the moment fully
comply with the specifications, no flag is generated from speeds above 25 m/s.

The arrow is rendered according to the rules specified by
\code
arrowfill [color] [blendrule]
arrowstroke [color] [blendrule]
\endcode
The size of the arrow is principally determined by
\code
arrowscale [scalefactor]
\endcode
whose default value is 1.0. The factor is used to scale the arrow
path definition uniformly. Additionally, one may also use the command
\code
windarrowscale [A] [B] [C]
\endcode
to scale the arrow nonlinearly and depending on the speed at the
location. The default values for a,b and c are 0,0 and 1 respectively,
and the formula applied to calculate an extra scaling factor for
the arrow is
\f[
  A \log (B S + 1) + C
\f]
where S is the speed value. Note that the value is always 1
for the default parameters, and no extra scaling thus occurs.
A is used to control linearly how fast the arrow grows, while
B is used to control it logarithmically. In general one should
try to find a suitable value for B first, to represent the speed
of increasing the size of the arrow, and then scale using
A to find a suitable final size.

The arrows themselves are put on the image using the commands
\code
windarrow [longitude] [latitude]
windarrows [dx] [dy]
\endcode
The first form places the arrow at a specific location. Both the
direction and the speed will be interpolated, if necessary, for
the given coordinates.

The second form places an arrow at each grid location, with the
given steps. Using <em>dx</em>=1 and <em>dy</em>=1 an arrow would
be placed at every grid point.

\subsection label_section Placing text values in the images

One can place numeric data values in the image using any one
of the commands
\code
label [longitude] [latitude]
labelxy [longitude] [latitude] [x] [y]
labels [dx] [dy]
\endcode
The <em>label</em> command places a label at the specified geographic
coordinates. One can place the label at a completely different
location in the image using the <em>labelxy</em> command. Finally, one
can place labels at the grid points themselves using the
<em>labels</em> command. The <em>dx</em> and <em>dy</em> arguments
specify the step size in the grid, usually one labels every grid point
using a step size of 1.

Often the coordinate from which the label value is taken is not
convenient for placing the label itself. One can adjust the location
of the label sligthly by using
\code
labeloffset [dx] [dy]
\endcode
where the adjustment is measured in pixels. However, when one moves
the label one may wish to mark the actual geographic spot using
\code
labelmarker [imagefilename] [blendingrule] [alphafactor]
\endcode
The image is placed at all labeled geographic coordinates.

Also, one may place a caption for each label. Usually the caption
is the name of the parameter, and is used when several parameters
are being drawn.
\code
labelcaption [captiontext] [dx] [dy] [alignment]
\endcode
The available alignments are
  - Center
  - North
  - NorthWest
  - West
  - SouthWest
  - South
  - SouthEast
  - East
  - NorthEast

One can modify the appearance of the label itself using the following
commands
\code
labelfont [fontname]                  (default TimesRoman)
labelsize [size]                      (default 12 pixels)
labelstroke [color] [blendingrule]    (default none, Copy)
labelfill [color] [blendingrule]      (default none, Copy)
labelalign [alignment]                (default Center)
labelformat [format]                  (default is "%.1f", - implies no output)
labelangle [angle]                    (default 0)
labelmissing [label]                  (default is -, disable with none)
\endcode
The <em>format</em> is the format string of a sprintf command for
a floating point value.

Note that by default there is no format. This is convenient when one
only wishes to place markers at the grid points using the
<em>labelmarker</em> command as follows
\code
labelformat -
labels 1 1
labelmarker [imagefilename] [blendingrule] [alphafactor]
\endcode
Finally, one can clear the label location definitions when beginning
a new contouring by
\code
clear labels
\endcode

\subsection rendercontour_section Saving the results

The contoured images can be saved using
\code
background [filename]
foreground [filename]
foregroundrule [blendingrule]
draw contours
clear params
clear contours
\endcode
The first command may be replaced with an <em>erase [color]</em> command,
provided a foreground is given. Alternatively the foreground may be
omitted, provided the background is given.

The <em>clear contours</em> command is optional, and should only
be applied at the end of a file, or when the contour specifications
documented in the earlier sections really change.

The <em>clear params</em> may be needed when starting a new
image with different settings, otherwise the old parameters
will be remembered when rendering the new image.

One may also modify each output image by overlaying some image on
top of them, for example a logo or a legend. This is accomplished
using
\code
combine [imagefilename] [x] [y] [blendingrule] [blendfactor]
\endcode
The extra image setting can be cleared using
\code
combine none
\endcode

\subsection interpolation_section Interpolation of the querydata

One can choose how the querydata is to be interpolated using
\code
contourinterpolation [Nearest|Linear]
\endcode
The default value is <em>Linear</em>. <em>Nearest</em> is needed
when the data is of discrete nature and cannot be interpolated
naturally as floating point numbers.

There is no <em>Cubic</em> interpolation at the moment. To obtain
smoother appearance one should smoothen the data instead, as 
explained in section \ref smoothing_section

\subsection filtering_section Filtering the querydata

By default qdcontour renders the first 24 data times in the
given querydata. The number of images rendered can be modified
using
\code
timesteps [number]
\endcode
To skip a specific amount of minutes from the start one can
use
\code
timestepskip [minutes]
\endcode
This may be useful for example if one wishes to render the first
48 hours at a 1h step, then the rest using a longer step.

Also, one may skip particular times by specifying the time step
to be used with
\code
timestep [minutes]
\endcode
The default value is 0, implying the time step defined in the
data itself will be used.

One may specify the timestep to be rounded the the nearest multiple
of the data time using
\code
timesteprounding [0|1]
\endcode
(
<em>
Actually, I have no clue whether the above comment is correct.
Can't see it directly from the code either. I'll have to
make explicit tests later on. -Mika
</em>
)

Note that one may define a time step which is not a multiple
of the time step in the data itself. In such cases one should
define how the data values from the new moment in time are
to be calculated using the commands
\code
filter [none|linear|mean|sum|min|max]
timeinterval [minutes]
\endcode
By default the filter is <em>none</em>, and no values can be
calculated. The time is then considered invalid, and no image
is produced.

A new value can usually be calculated (when interpolation makes sense)
using the <em>linear</em> filter, which interpolates the new values
linearly from the adjacent existing data times.

Alternatively, one may calculate a new derivative parameter, such as
the <em>sum</em>, <em>min</em> or <em>max</em> of the data values.
Typically one then chooses the <em>timestep</em> and <em>timeinterval</em>
to be equal, although it is strictly speaking not necessary.

For example, to render the daily maximum temperature one could use
\code
timestep 1440        # 24 hours
timeinterval 1440
filter max
\endcode

Finally, one may explicitly modify the data itself using
\code
datareplace [sourcevalue] [targetvalue]
\endcode
This is mostly useful when the original data uses another missing value
indicator than 32700, which is used by newbase.

The commands
\code
datalolimit [value]
datahilimit [value]
\endcode
can be used to indicate that any value outside the limited range
is to be considered missing data.

\subsection smoothing_section Smoothening the querydata

Occasionally the parameter stored in the querydata has too little
resolution for contouring purposes. This demonstrates itself
in the jaggedness of the rendered contour lines.

To alleviate the problem, qdcontour is able to smoothen the
data by calculating a moving weighted average. The commands
available for doing this are
\code
smoother [None|Neighbourhood|PseudoGaussian]
smootherradius [radius]
smootherfactor [factor]
\endcode
The default smoother is <em>None</em>. The recommended smoother
when smoothing becomes necessary is <em>PseudoGaussian</em>.

The <em>radius</em> controls the radius of the moving average
calculation. Typically uses a radius 2-3 times the grid spacing.

The <em>factor</em> controls the sharpness of the weighting
function, the higher the number (say 10-20), the closer the
smoothed values are to the originals. A low value such as 1-4
smoothens the data more.

\subsection timestamp_section Placing timestamps in the images

One can place a timestamp in the image itself using
the commands
\code
timestampimage [none|obs|for|forobs]
timestampimage [x] [y]
\endcode
The first command specifies what kind of a text is placed in the
image, the second the coordinates of the text. If the coordinates
are negative, they are considered offsets from the bottom or
right edges.

The different formats are
<dl>
<dt>none</dt>
<dd>No timestamp is rendered</dd>
<dt>obs</dt>
<dd>The time of the data is rendered</dd>
<dt>for</dt>
<dd>The forecast time is rendered</dd>
<dt>forobs</dt>
<dd>The forecast time is rendered followed by the offset to the data time</dd>
</dl>

\section appendix_section Appendix

\subsection color_section Color

Internally the program represents colors using hexadecimal numbers
of form "AARRGGBB" where thr RGB components range from 00 to FF,
and the alpha component from 00 to 7F, 7F being transparent.
The highest bit is reserved for internal use to represent
the "none" color.

The colors understood by the control file parser are

\htmlonly
<dl>
<dt>none</dt>
<dd>This is a special color meaning no rendering is to be done.</dd>
<dt>transparent</dt>
<dd>This is equivalent to color #7f000000</dd>
<dt><em>colorname</em></dt>
<dd>The recognized names are listed in the table below</dd>
<dt><em>colorname</em>,<em>A</em></dt>
<dd>In addition to the color, one may specify alpha in the range 0-127.</dd>
<dt><em>R</em>,<em>G</em>,<em>B</em></dt>
<dd>The individual RGB components in the range 0-255.</dd>
<dt><em>R</em>,<em>G</em>,<em>B</em>,<em>A</em></dt>
<dd>The individual RGB components plus alpha in the range 0-127.</dd>
<dt>#AARRGGBB</dt>
<dd>The color directly in the hexadecimal form</dd>
</dl>
\endhtmlonly

The recognized colors are those listed in the SVG specification
at the <a href="http://www.w3.org/TR/SVG/types.html#ColorKeyWords">W3C</a>
site.

\htmlonly
<table align=center border=0 cellspacing=20>
<tr valign=top><td>
<table bgcolor='#ccffcc' cellpadding=2 border=3>
<tr><td>aliceblue</td><td>240,248,255</td><td style="background-color:rgb(240,248,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>antiquewhite</td><td>250,235,215</td><td style="background-color:rgb(250,235,215)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>aqua</td><td>0,255,255</td><td style="background-color:rgb(0,255,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>aquamarine</td><td>127,255,212</td><td style="background-color:rgb(127,255,212)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>azure</td><td>240,255,255</td><td style="background-color:rgb(240,255,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>beige</td><td>245,245,220</td><td style="background-color:rgb(245,245,220)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>bisque</td><td>255,228,196</td><td style="background-color:rgb(255,228,196)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>black</td><td>0,0,0</td><td style="background-color:rgb(0,0,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>blanchedalmond</td><td>255,235,205</td><td style="background-color:rgb(255,235,205)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>blue</td><td>0,0,255</td><td style="background-color:rgb(0,0,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>blueviolet</td><td>138,43,226</td><td style="background-color:rgb(138,43,226)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>brown</td><td>165,42,42</td><td style="background-color:rgb(165,42,42)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>burlywood</td><td>222,184,135</td><td style="background-color:rgb(222,184,135)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>cadetblue</td><td>95,158,160</td><td style="background-color:rgb(95,158,160)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>chartreuse</td><td>127,255,0</td><td style="background-color:rgb(127,255,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>chocolate</td><td>210,105,30</td><td style="background-color:rgb(210,105,30)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>coral</td><td>255,127,80</td><td style="background-color:rgb(255,127,80)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>cornflowerblue</td><td>100,149,237</td><td style="background-color:rgb(100,149,237)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>cornsilk</td><td>255,248,220</td><td style="background-color:rgb(255,248,220)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>crimson</td><td>220,20,60</td><td style="background-color:rgb(220,20,60)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>cyan</td><td>0,255,255</td><td style="background-color:rgb(0,255,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkblue</td><td>0,0,139</td><td style="background-color:rgb(0,0,139)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkcyan</td><td>0,139,139</td><td style="background-color:rgb(0,139,139)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkgoldenrod</td><td>184,134,11</td><td style="background-color:rgb(184,134,11)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkgray</td><td>169,169,169</td><td style="background-color:rgb(169,169,169)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkgreen</td><td>0,100,0</td><td style="background-color:rgb(0,100,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkgrey</td><td>169,169,169</td><td style="background-color:rgb(169,169,169)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkkhaki</td><td>189,183,107</td><td style="background-color:rgb(189,183,107)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkmagenta</td><td>139,0,139</td><td style="background-color:rgb(139,0,139)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkolivegreen</td><td>85,107,47</td><td style="background-color:rgb(85,107,47)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkorange</td><td>255,140,0</td><td style="background-color:rgb(255,140,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkorchid</td><td>153,50,204</td><td style="background-color:rgb(153,50,204)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkred</td><td>139,0,0</td><td style="background-color:rgb(139,0,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darksalmon</td><td>233,150,122</td><td style="background-color:rgb(233,150,122)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkseagreen</td><td>143,188,143</td><td style="background-color:rgb(143,188,143)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkslateblue</td><td>72,61,139</td><td style="background-color:rgb(72,61,139)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkslategray</td><td>47,79,79</td><td style="background-color:rgb(47,79,79)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkslategrey</td><td>47,79,79</td><td style="background-color:rgb(47,79,79)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkturquoise</td><td>0,206,209</td><td style="background-color:rgb(0,206,209)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>darkviolet</td><td>148,0,211</td><td style="background-color:rgb(148,0,211)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>deeppink</td><td>255,20,147</td><td style="background-color:rgb(255,20,147)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>deepskyblue</td><td>0,191,255</td><td style="background-color:rgb(0,191,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>dimgray</td><td>105,105,105</td><td style="background-color:rgb(105,105,105)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>dimgrey</td><td>105,105,105</td><td style="background-color:rgb(105,105,105)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>dodgerblue</td><td>30,144,255</td><td style="background-color:rgb(30,144,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>firebrick</td><td>178,34,34</td><td style="background-color:rgb(178,34,34)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>floralwhite</td><td>255,250,240</td><td style="background-color:rgb(255,250,240)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>forestgreen</td><td>34,139,34</td><td style="background-color:rgb(34,139,34)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>fuchsia</td><td>255,0,255</td><td style="background-color:rgb(255,0,255)">&nbsp;&nbsp;&nbsp;</td></tr>
</table>
</td><td>
<table bgcolor='#ccffcc' cellpadding=2 border=3>
<tr><td>gainsboro</td><td>220,220,220</td><td style="background-color:rgb(220,220,220)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>ghostwhite</td><td>248,248,255</td><td style="background-color:rgb(248,248,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>gold</td><td>255,215,0</td><td style="background-color:rgb(255,215,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>goldenrod</td><td>218,165,32</td><td style="background-color:rgb(218,165,32)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>gray</td><td>128,128,128</td><td style="background-color:rgb(128,128,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>green</td><td>0,128,0</td><td style="background-color:rgb(0,128,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>greenyellow</td><td>173,255,47</td><td style="background-color:rgb(173,255,47)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>grey</td><td>128,128,128</td><td style="background-color:rgb(128,128,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>honeydew</td><td>240,255,240</td><td style="background-color:rgb(240,255,240)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>hotpink</td><td>255,105,180</td><td style="background-color:rgb(255,105,180)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>indianred</td><td>205,92,92</td><td style="background-color:rgb(205,92,92)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>indigo</td><td>75,0,130</td><td style="background-color:rgb(75,0,130)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>ivory</td><td>255,255,240</td><td style="background-color:rgb(255,255,240)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>khaki</td><td>240,230,140</td><td style="background-color:rgb(240,230,140)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lavender</td><td>230,230,250</td><td style="background-color:rgb(230,230,250)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lavenderblush</td><td>255,240,245</td><td style="background-color:rgb(255,240,245)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lawngreen</td><td>124,252,0</td><td style="background-color:rgb(124,252,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lemonchiffon</td><td>255,250,205</td><td style="background-color:rgb(255,250,205)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightblue</td><td>173,216,230</td><td style="background-color:rgb(173,216,230)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightcoral</td><td>240,128,128</td><td style="background-color:rgb(240,128,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightcyan</td><td>224,255,255</td><td style="background-color:rgb(224,255,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightgoldenrodyellow</td><td>250,250,210</td><td style="background-color:rgb(250,250,210)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightgray</td><td>211,211,211</td><td style="background-color:rgb(211,211,211)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightgreen</td><td>144,238,144</td><td style="background-color:rgb(144,238,144)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightgrey</td><td>211,211,211</td><td style="background-color:rgb(211,211,211)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightpink</td><td>255,182,193</td><td style="background-color:rgb(255,182,193)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightsalmon</td><td>255,160,122</td><td style="background-color:rgb(255,160,122)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightseagreen</td><td>32,178,170</td><td style="background-color:rgb(32,178,170)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightskyblue</td><td>135,206,250</td><td style="background-color:rgb(135,206,250)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightslategray</td><td>119,136,153</td><td style="background-color:rgb(119,136,153)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightslategrey</td><td>119,136,153</td><td style="background-color:rgb(119,136,153)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightsteelblue</td><td>176,196,222</td><td style="background-color:rgb(176,196,222)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lightyellow</td><td>255,255,224</td><td style="background-color:rgb(255,255,224)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>lime</td><td>0,255,0</td><td style="background-color:rgb(0,255,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>limegreen</td><td>50,205,50</td><td style="background-color:rgb(50,205,50)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>linen</td><td>250,240,230</td><td style="background-color:rgb(250,240,230)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>magenta</td><td>255,0,255</td><td style="background-color:rgb(255,0,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>maroon</td><td>128,0,0</td><td style="background-color:rgb(128,0,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumaquamarine</td><td>102,205,170</td><td style="background-color:rgb(102,205,170)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumblue</td><td>0,0,205</td><td style="background-color:rgb(0,0,205)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumorchid</td><td>186,85,211</td><td style="background-color:rgb(186,85,211)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumpurple</td><td>147,112,219</td><td style="background-color:rgb(147,112,219)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumseagreen</td><td>60,179,113</td><td style="background-color:rgb(60,179,113)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumslateblue</td><td>123,104,238</td><td style="background-color:rgb(123,104,238)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumspringgreen</td><td>0,250,154</td><td style="background-color:rgb(0,250,154)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumturquoise</td><td>72,209,204</td><td style="background-color:rgb(72,209,204)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mediumvioletred</td><td>199,21,133</td><td style="background-color:rgb(199,21,133)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>midnightblue</td><td>25,25,112</td><td style="background-color:rgb(25,25,112)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>mintcream</td><td>245,255,250</td><td style="background-color:rgb(245,255,250)">&nbsp;&nbsp;&nbsp;</td></tr>
</table>
</td><td>
<table bgcolor='#ccffcc' cellpadding=2 border=3>
<tr><td>mistyrose</td><td>255,228,225</td><td style="background-color:rgb(255,228,225)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>moccasin</td><td>255,228,181</td><td style="background-color:rgb(255,228,181)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>navajowhite</td><td>255,222,173</td><td style="background-color:rgb(255,222,173)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>navy</td><td>0,0,128</td><td style="background-color:rgb(0,0,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>oldlace</td><td>253,245,230</td><td style="background-color:rgb(253,245,230)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>olive</td><td>128,128,0</td><td style="background-color:rgb(128,128,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>olivedrab</td><td>107,142,35</td><td style="background-color:rgb(107,142,35)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>orange</td><td>255,165,0</td><td style="background-color:rgb(255,165,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>orangered</td><td>255,69,0</td><td style="background-color:rgb(255,69,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>orchid</td><td>218,112,214</td><td style="background-color:rgb(218,112,214)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>palegoldenrod</td><td>238,232,170</td><td style="background-color:rgb(238,232,170)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>palegreen</td><td>152,251,152</td><td style="background-color:rgb(152,251,152)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>paleturquoise</td><td>175,238,238</td><td style="background-color:rgb(175,238,238)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>palevioletred</td><td>219,112,147</td><td style="background-color:rgb(219,112,147)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>papayawhip</td><td>255,239,213</td><td style="background-color:rgb(255,239,213)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>peachpuff</td><td>255,218,185</td><td style="background-color:rgb(255,218,185)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>peru</td><td>205,133,63</td><td style="background-color:rgb(205,133,63)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>pink</td><td>255,192,203</td><td style="background-color:rgb(255,192,203)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>plum</td><td>221,160,221</td><td style="background-color:rgb(221,160,221)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>powderblue</td><td>176,224,230</td><td style="background-color:rgb(176,224,230)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>purple</td><td>128,0,128</td><td style="background-color:rgb(128,0,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>red</td><td>255,0,0</td><td style="background-color:rgb(255,0,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>rosybrown</td><td>188,143,143</td><td style="background-color:rgb(188,143,143)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>royalblue</td><td>65,105,225</td><td style="background-color:rgb(65,105,225)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>saddlebrown</td><td>139,69,19</td><td style="background-color:rgb(139,69,19)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>salmon</td><td>250,128,114</td><td style="background-color:rgb(250,128,114)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>sandybrown</td><td>244,164,96</td><td style="background-color:rgb(244,164,96)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>seagreen</td><td>46,139,87</td><td style="background-color:rgb(46,139,87)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>seashell</td><td>255,245,238</td><td style="background-color:rgb(255,245,238)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>sienna</td><td>160,82,45</td><td style="background-color:rgb(160,82,45)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>silver</td><td>192,192,192</td><td style="background-color:rgb(192,192,192)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>skyblue</td><td>135,206,235</td><td style="background-color:rgb(135,206,235)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>slateblue</td><td>106,90,205</td><td style="background-color:rgb(106,90,205)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>slategray</td><td>112,128,144</td><td style="background-color:rgb(112,128,144)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>slategrey</td><td>112,128,144</td><td style="background-color:rgb(112,128,144)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>snow</td><td>255,250,250</td><td style="background-color:rgb(255,250,250)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>springgreen</td><td>0,255,127</td><td style="background-color:rgb(0,255,127)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>steelblue</td><td>70,130,180</td><td style="background-color:rgb(70,130,180)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>tan</td><td>210,180,140</td><td style="background-color:rgb(210,180,140)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>teal</td><td>0,128,128</td><td style="background-color:rgb(0,128,128)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>thistle</td><td>216,191,216</td><td style="background-color:rgb(216,191,216)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>tomato</td><td>255,99,71</td><td style="background-color:rgb(255,99,71)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>turquoise</td><td>64,224,208</td><td style="background-color:rgb(64,224,208)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>violet</td><td>238,130,238</td><td style="background-color:rgb(238,130,238)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>wheat</td><td>245,222,179</td><td style="background-color:rgb(245,222,179)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>white</td><td>255,255,255</td><td style="background-color:rgb(255,255,255)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>whitesmoke</td><td>245,245,245</td><td style="background-color:rgb(245,245,245)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>yellow</td><td>255,255,0</td><td style="background-color:rgb(255,255,0)">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>yellowgreen</td><td>154,205,50</td><td style="background-color:rgb(154,205,50)">&nbsp;&nbsp;&nbsp;</td></tr>
</table>
</tr></table>
\endhtmlonly

\subsection blending_section Blending colors

In general, one can define an arbitrary function Blend(color1,color2), which
given two colors would produce a result color. The qdcontour program understands
several such functions in common use in various graphical packages, and also
some in not so common use. Whenever rendering a color (source) on top of another
one (destination), qdcontour will store Blend(source,destination) as the new
destination color.

First, below are the well known Porter-Duff rules:

\htmlonly
<dl>
<dt>Clear</dt>
<dd>Both the color and the alpha of the destination color are cleared.
    The input colors are not used at all.
</dd>
<dt>Copy</dt>
<dd>The source is copied to the destination. The destination is not used
    at all.
</dd>
<dt>Keep</dt>
<dd>The destination is kept as is. This is a rather useless blending mode.
</dd>
<dt>Over</dt>
<dd>The source color is composited over the destination using the
    linear alpha blending. This is the most common blending mode
    whenever alpha-channels are in use.
</dd>
<dt>Under</dt>
<dd>This is similar to Over, but the roles of the colors are reversed
    in the formula. In effect, the destination is placed over the
    source.
</dd>
<dt>In</dt>
<dd>The part of the source lying inside the destination replaces
    the destination. Typically destination is some kind of a mask
    for picking a part out of the source.
</dd>
<dt>KeepIn</dt>
<dd>The part of the destination lying inside the source replaces
    the destination. This is similar to Keep, but with the mask
    role reversed.
</dd>
<dt>Out</dt>
<dd>The part of the source lying outside of the destination
    replaces the destination.
</dd>
<dt>KeepOut</dt>
<dd>The part of the destination lying outside of the source
    replaces the destination.
</dd>
<dt>Atop</dt>
<dd>The part of the source inside the destination replaces
    the part inside the destination.
</dd>
<dt>KeepAtop</dt>
<dd>The part of the destination inside the source replaces
    the part inside the source in the destination.
</dd>
<dt>Xor</dt>
<dd>Only non-overlapping areas of source and destination are kept.
</dd>
</dl>
\endhtmlonly

In addition, the following extra blending modes are defined:

\htmlonly
<dl>
<dt>Plus</dt>
<dd>Add alpha-factored-RGBA values (Fs=1, Fd=1)</dd>
<dt>Minus</dt>
<dd>Substract alpha-factored RGBA values (Fs=1, Fd=-1)</dd>
<dt>Add</dt>
<dd>Add RGBA values</dd>
<dt>Substract</dt>
<dd>Substract RGBA values</dd>
<dt>Multiply</dt>
<dd>Multiply RGBA values</dd>
<dt>Difference</dt>
<dd>Absolute difference of RGBA values</dd>
<dt>Bumpmap</dt>
<dd>Adjust by intensity of source color</dd>
<dt>Dentmap</dt>
<dd>Adjust by intensity of destination color</dd>
<dt>CopyRed</dt>
<dd>Copy red component only</dd>
<dt>CopyGreen</dt>
<dd>Copy green component only</dd>
<dt>CopyBlue</dt>
<dd>Copy blue component only</dd>
<dt>CopyMatte</dt>
<dd>Copy opacity only</dd>
<dt>CopyHue</dt>
<dd>Copy hue component only</dd>
<dt>CopyLightness</dt>
<dd>Copy light component only</dd>
<dt>CopySaturation</dt>
<dd>Copy saturation component only</dd>
<dt>KeepMatte</dt>
<dd>Keep target matte only</dd>
<dt>KeepHue</dt>
<dd>Keep target hue only</dd>
<dt>KeepLightness</dt>
<dd>Keep target lightness only</dd>
<dt>KeepSaturation</dt>
<dd>Keep target saturation only</dd>
<dt>AddContrast</dt>
<dd>Enhance the contrast of target pixel</dd>
<dt>ReduceContrast</dt>
<dd>Reduce the contrast of target pixel</dd>
<dt>OnOpaque</dt>
<dd>Draw on opaque areas only</dd>
<dt>OnTransparent</dt>
<dd>Draw on transparent areas only</dd>
</dl>
\endhtmlonly

\subsection shapesample_section A sample shapefile rendering control file

Not yet.

\subsection sample_section A sample contouring control file

Below is a sample control file which is used to render T2m
contour images for Tiehallinto. To get an idea what a
typical control file contains, please browse through the
example.

\code

# First we define the querydata containing the Temperature
# forecast we intend to contour

querydata kepa_suomi_pieni.sqd

# By choosing timestep 0 we ensure the natural timestep
# of the data, which happens to be 60 minutes, is used.

timestep 0

# We wish to render 36 images

timesteps 36

# The output images do not need to store the alpha channel

savealpha 0

# If possible, we want to store a palette version since
# it is usually smaller than a true color version

wantpalette 1

# We want each image filename to contain the data timestamp

timestamp 1

# Each filename is to be prefixed with ENN_ and suffixed with _T2

prefix ENN_
suffix _T2

# We use the default format png

format png

# We wish the forecast time and lead time to be rendered
# on all images, 160 pixels from the right and 15 pixels
# from the bottom

timestampimage forobs
timestampimagexy -160 -15

# We choose linear instead of nearest-neighbour interpolation

contourinterpolation Linear

# We do not wish the algorithm to recursively subdivide
# the grid, it usually is of very little help in smoothening
# the appearance of the output

contourdepth 0

# We wish to smoothen the data itself first, to get
# better looking contours. We use a gaussian-lookin
# weighting scheme.

smoother PseudoGaussian

# The points used in smoothing span a radius of 100km
# The actual grid spacing is 30km, so this convers several points

smootherradius 100000	# in meters!

# The smoothing is fairly sharp, smaller numbers would smoothen
# the data more

smootherfactor 12

# Any colour filling is done by copying the color over the background

fillrule Copy

# And line drawing is done by alpha blending

strokerule Over

# The parameter we wish to render is temperature

param Temperature

# From minus infinity to -38, we use RGB color 130,0,252

contourfill - -38 130,0,252

# From -38 to -36 RGB color 162,29,255

contourfill -38 -36 162,29,255

# All these colors were specified by Jouko Kantonen of Tiehallino

contourfill -36 -34 161,61,255
contourfill -34 -32 177,93,255
contourfill -32 -30 192,125,255
contourfill -30 -28 37,37,255
contourfill -28 -26 69,69,255
contourfill -26 -24 101,101,255
contourfill -24 -22 133,139,255
contourfill -22 -20 165,165,255
contourfill -20 -18 0,114,254
contourfill -18 -16 27,129,255
contourfill -16 -14 55,145,255
contourfill -14 -12 83,160,255
contourfill -12 -10 111,176,255
contourfill -10 -8 0,111,124
contourfill -8 -6 0,138,140
contourfill -6 -5 0,154,156
contourfill -5 -4 0,178,180
contourfill -4 -3 0,204,206
contourfill -3 -2 0,231,234
contourfill -2 -1 45,253,255
contourfill -1 0 125,255,220
contourfill 0 1 234,244,66
contourfill 1 2 255,225,0
contourfill 2 4 255,192,1
contourfill 4 6 255,156,1
contourfill 6 8 255,121,1
contourfill 8 10 255,85,1
contourfill 10 12 255,129,129
contourfill 12 14 255,97,97
contourfill 14 16 255,65,65
contourfill 16 18 255,33,33
contourfill 18 20 255,0,0
contourfill 20 22 255,129,191
contourfill 22 24 255,97,175
contourfill 24 26 255,65,159
contourfill 26 28 255,33,143
contourfill 28 30 255,0,128
contourfill 30 32 255,129,233
contourfill 32 34 255,97,227
contourfill 34 36 255,65,222
contourfill 36 38 255,33,216

# Finally fill area from 38 to plus infinity with RGB 255,1,210
contourfill 38 -  255,1,210

# Then we draw lines from -60 up to -8 at steps of 2

contourlines -60 -8 2 #30444444 #30444444

# The spacing goes down to 1 in temperature range -6 to 2

contourlines -6 2 1 #30444444 #30444444

# And back to spacing 2 for range 4 - 50 degrees

contourlines 4 60 2 #30444444 #30444444

# Then we start the actual rendering

# The projection is polar stereographic, 25 central longitude

stereographic 25 90 60

####### Suomi

# The area of the background and foreground images

bottomleft 19.0 58.0
topright 40.0 71.0

# The actual background and foreground images

background /var/www/share/anim/maps/suomi_tiehallinto_296x500/background.png
foreground /var/www/share/anim/maps/suomi_tiehallinto_296x500/foreground.png

# We must never use Copy as the foreground rule, always alpha blend

foregroundrule Over

# Where to place the rendered images

savepath /var/www/share/anim/t2m/suomi_tiehallinto_296x500

# Render Suomi now!

draw contours

######## Etel-Suomi

# Specifications like for Suomi in above follow for Etel-Suomi

bottomleft 20.0 58.7
topright 34.0 64.9
background /var/www/share/anim/maps/etelasuomi_tiehallinto_500x500/background.png
foreground /var/www/share/anim/maps/etelasuomi_tiehallinto_500x500/foreground.png
foregroundrule Over
savepath /var/www/share/anim/t2m/etelasuomi_tiehallinto_500x500
draw contours

# We have omitted Keski-Suomi and Pohjois-Suomi for brevity

# Finally we clear all contour specifications, in case somebody
# is contouring multiple files at once

clear contours
\endcode

\subsection deprecated_section Deprecated features

\code
contourdepth [depth]
legenderase [color]
draw legend [name] [lo] [hi] [width] [height]
draw imagemap [fieldname] [filename]
labelfile [filename]
hilimit [value]
\endcode

 */
// ======================================================================
